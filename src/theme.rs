use egui::Color32;

// ===== TOKYO NIGHT - NIGHT VARIANT (Default) =====
// The classic Tokyo Night with deep blue backgrounds

pub const TN_NIGHT_BG: Color32 = Color32::from_rgb(26, 27, 38); // #1a1b26
pub const TN_NIGHT_BG_DARK: Color32 = Color32::from_rgb(22, 22, 30); // #16161e
pub const TN_NIGHT_BG_HIGHLIGHT: Color32 = Color32::from_rgb(41, 46, 66); // #292e42
pub const TN_NIGHT_TERMINAL_BLACK: Color32 = Color32::from_rgb(21, 24, 44); // #15161e
pub const TN_NIGHT_FG: Color32 = Color32::from_rgb(192, 202, 245); // #c0caf5
pub const TN_NIGHT_FG_DARK: Color32 = Color32::from_rgb(169, 177, 214); // #a9b1d6
pub const TN_NIGHT_FG_GUTTER: Color32 = Color32::from_rgb(59, 66, 97); // #3b4261
pub const TN_NIGHT_DARK3: Color32 = Color32::from_rgb(68, 75, 106); // #444b6a
pub const TN_NIGHT_COMMENT: Color32 = Color32::from_rgb(86, 95, 137); // #565f89
pub const TN_NIGHT_DARK5: Color32 = Color32::from_rgb(115, 127, 173); // #737aa2
pub const TN_NIGHT_BLUE0: Color32 = Color32::from_rgb(61, 89, 161); // #3d59a1
pub const TN_NIGHT_BLUE: Color32 = Color32::from_rgb(122, 162, 247); // #7aa2f7
pub const TN_NIGHT_CYAN: Color32 = Color32::from_rgb(125, 207, 255); // #7dcfff
pub const TN_NIGHT_BLUE1: Color32 = Color32::from_rgb(42, 195, 222); // #2ac3de
pub const TN_NIGHT_BLUE2: Color32 = Color32::from_rgb(0, 122, 204); // #007acc
pub const TN_NIGHT_BLUE5: Color32 = Color32::from_rgb(137, 221, 255); // #89ddff
pub const TN_NIGHT_BLUE6: Color32 = Color32::from_rgb(180, 249, 248); // #b4f9f8
pub const TN_NIGHT_BLUE7: Color32 = Color32::from_rgb(148, 226, 213); // #94e2d5
pub const TN_NIGHT_MAGENTA: Color32 = Color32::from_rgb(187, 154, 247); // #bb9af7
pub const TN_NIGHT_MAGENTA2: Color32 = Color32::from_rgb(255, 0, 127); // #ff007c
pub const TN_NIGHT_PURPLE: Color32 = Color32::from_rgb(157, 124, 216); // #9d7cd8
pub const TN_NIGHT_ORANGE: Color32 = Color32::from_rgb(255, 158, 100); // #ff9e64
pub const TN_NIGHT_YELLOW: Color32 = Color32::from_rgb(224, 175, 104); // #e0af68
pub const TN_NIGHT_GREEN: Color32 = Color32::from_rgb(158, 206, 106); // #9ece6a
pub const TN_NIGHT_GREEN1: Color32 = Color32::from_rgb(115, 218, 202); // #73daca
pub const TN_NIGHT_GREEN2: Color32 = Color32::from_rgb(65, 166, 181); // #41a6b5
pub const TN_NIGHT_TEAL: Color32 = Color32::from_rgb(26, 188, 156); // #1abc9c
pub const TN_NIGHT_RED: Color32 = Color32::from_rgb(247, 118, 142); // #f7768e
pub const TN_NIGHT_RED1: Color32 = Color32::from_rgb(219, 75, 75); // #db4b4b

// ===== TOKYO NIGHT - STORM VARIANT =====
// Lighter variant with grey-blue backgrounds

pub const TN_STORM_BG: Color32 = Color32::from_rgb(36, 40, 59); // #24283b
pub const TN_STORM_BG_DARK: Color32 = Color32::from_rgb(30, 33, 49); // #1e2030
pub const TN_STORM_BG_HIGHLIGHT: Color32 = Color32::from_rgb(47, 52, 74); // #2f344a
pub const TN_STORM_TERMINAL_BLACK: Color32 = Color32::from_rgb(6, 10, 33); // #06101e
pub const TN_STORM_FG: Color32 = Color32::from_rgb(192, 202, 245); // #c0caf5
pub const TN_STORM_FG_DARK: Color32 = Color32::from_rgb(169, 177, 214); // #a9b1d6
pub const TN_STORM_FG_GUTTER: Color32 = Color32::from_rgb(59, 66, 97); // #3b4261
pub const TN_STORM_DARK3: Color32 = Color32::from_rgb(68, 75, 106); // #444b6a
pub const TN_STORM_COMMENT: Color32 = Color32::from_rgb(86, 95, 137); // #565f89
pub const TN_STORM_DARK5: Color32 = Color32::from_rgb(115, 127, 173); // #737aa2
pub const TN_STORM_BLUE0: Color32 = Color32::from_rgb(61, 89, 161); // #3d59a1
pub const TN_STORM_BLUE: Color32 = Color32::from_rgb(122, 162, 247); // #7aa2f7
pub const TN_STORM_CYAN: Color32 = Color32::from_rgb(125, 207, 255); // #7dcfff
pub const TN_STORM_BLUE1: Color32 = Color32::from_rgb(42, 195, 222); // #2ac3de
pub const TN_STORM_BLUE2: Color32 = Color32::from_rgb(0, 122, 204); // #007acc
pub const TN_STORM_BLUE5: Color32 = Color32::from_rgb(137, 221, 255); // #89ddff
pub const TN_STORM_BLUE6: Color32 = Color32::from_rgb(180, 249, 248); // #b4f9f8
pub const TN_STORM_BLUE7: Color32 = Color32::from_rgb(148, 226, 213); // #94e2d5
pub const TN_STORM_MAGENTA: Color32 = Color32::from_rgb(187, 154, 247); // #bb9af7
pub const TN_STORM_MAGENTA2: Color32 = Color32::from_rgb(255, 0, 127); // #ff007c
pub const TN_STORM_PURPLE: Color32 = Color32::from_rgb(157, 124, 216); // #9d7cd8
pub const TN_STORM_ORANGE: Color32 = Color32::from_rgb(255, 158, 100); // #ff9e64
pub const TN_STORM_YELLOW: Color32 = Color32::from_rgb(224, 175, 104); // #e0af68
pub const TN_STORM_GREEN: Color32 = Color32::from_rgb(158, 206, 106); // #9ece6a
pub const TN_STORM_GREEN1: Color32 = Color32::from_rgb(115, 218, 202); // #73daca
pub const TN_STORM_GREEN2: Color32 = Color32::from_rgb(65, 166, 181); // #41a6b5
pub const TN_STORM_TEAL: Color32 = Color32::from_rgb(26, 188, 156); // #1abc9c
pub const TN_STORM_RED: Color32 = Color32::from_rgb(247, 118, 142); // #f7768e
pub const TN_STORM_RED1: Color32 = Color32::from_rgb(219, 75, 75); // #db4b4b

// ===== TOKYO NIGHT - MOON VARIANT =====
// Softest variant with muted purple-blue backgrounds

pub const TN_MOON_BG: Color32 = Color32::from_rgb(34, 37, 63); // #222436
pub const TN_MOON_BG_DARK: Color32 = Color32::from_rgb(29, 31, 55); // #1e1e2e
pub const TN_MOON_BG_HIGHLIGHT: Color32 = Color32::from_rgb(42, 47, 74); // #2f334d
pub const TN_MOON_TERMINAL_BLACK: Color32 = Color32::from_rgb(17, 18, 39); // #1b1d2b
pub const TN_MOON_FG: Color32 = Color32::from_rgb(192, 202, 245); // #c0caf5
pub const TN_MOON_FG_DARK: Color32 = Color32::from_rgb(169, 177, 214); // #a9b1d6
pub const TN_MOON_FG_GUTTER: Color32 = Color32::from_rgb(59, 66, 97); // #3b4261
pub const TN_MOON_DARK3: Color32 = Color32::from_rgb(68, 75, 106); // #444a73
pub const TN_MOON_COMMENT: Color32 = Color32::from_rgb(86, 95, 137); // #636da6
pub const TN_MOON_DARK5: Color32 = Color32::from_rgb(115, 127, 173); // #737aa2
pub const TN_MOON_BLUE0: Color32 = Color32::from_rgb(61, 89, 161); // #3d59a1
pub const TN_MOON_BLUE: Color32 = Color32::from_rgb(130, 170, 255); // #82aaff
pub const TN_MOON_CYAN: Color32 = Color32::from_rgb(134, 230, 255); // #86e1fc
pub const TN_MOON_BLUE1: Color32 = Color32::from_rgb(101, 177, 239); // #65bcef
pub const TN_MOON_BLUE2: Color32 = Color32::from_rgb(0, 122, 204); // #0db9d7
pub const TN_MOON_BLUE5: Color32 = Color32::from_rgb(137, 221, 255); // #89ddff
pub const TN_MOON_BLUE6: Color32 = Color32::from_rgb(180, 249, 248); // #b4f9f8
pub const TN_MOON_BLUE7: Color32 = Color32::from_rgb(148, 226, 213); // #394b70
pub const TN_MOON_MAGENTA: Color32 = Color32::from_rgb(199, 146, 234); // #c099ff
pub const TN_MOON_MAGENTA2: Color32 = Color32::from_rgb(255, 117, 181); // #ff757f
pub const TN_MOON_PURPLE: Color32 = Color32::from_rgb(186, 154, 255); // #fca7ea
pub const TN_MOON_ORANGE: Color32 = Color32::from_rgb(255, 152, 0); // #ff9800
pub const TN_MOON_YELLOW: Color32 = Color32::from_rgb(255, 199, 119); // #ffc777
pub const TN_MOON_GREEN: Color32 = Color32::from_rgb(195, 232, 141); // #c3e88d
pub const TN_MOON_GREEN1: Color32 = Color32::from_rgb(77, 213, 196); // #4fd6be
pub const TN_MOON_GREEN2: Color32 = Color32::from_rgb(65, 166, 181); // #41a6b5
pub const TN_MOON_TEAL: Color32 = Color32::from_rgb(76, 220, 221); // #4fd6be
pub const TN_MOON_RED: Color32 = Color32::from_rgb(255, 117, 127); // #ff757f
pub const TN_MOON_RED1: Color32 = Color32::from_rgb(201, 74, 83); // #c94f6d

// ===== THEME VARIANT ENUM =====

#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum TokyoNightVariant {
    Night, // Default - Deep blue
    Storm, // Lighter grey-blue
    Moon,  // Softest purple-blue
}

impl Default for TokyoNightVariant {
    fn default() -> Self {
        TokyoNightVariant::Night
    }
}

// ===== THEME CONFIGURATION FUNCTIONS =====

pub fn configure_tokyo_night_theme(ctx: &egui::Context, variant: TokyoNightVariant) {
    match variant {
        TokyoNightVariant::Night => configure_tokyo_night_night(ctx),
        TokyoNightVariant::Storm => configure_tokyo_night_storm(ctx),
        TokyoNightVariant::Moon => configure_tokyo_night_moon(ctx),
    }
}

fn configure_tokyo_night_night(ctx: &egui::Context) {
    let mut style = (*ctx.style()).clone();
    let mut visuals = egui::Visuals::dark();

    // Backgrounds
    visuals.window_fill = TN_NIGHT_BG;
    visuals.panel_fill = TN_NIGHT_BG;
    visuals.extreme_bg_color = TN_NIGHT_BG_DARK;
    visuals.faint_bg_color = TN_NIGHT_BG_HIGHLIGHT;

    // Text
    visuals.override_text_color = Some(TN_NIGHT_FG);
    visuals.hyperlink_color = TN_NIGHT_CYAN;

    // Widgets - noninteractive
    visuals.widgets.noninteractive.bg_fill = TN_NIGHT_BG_HIGHLIGHT;
    visuals.widgets.noninteractive.bg_stroke = egui::Stroke::new(1.0, TN_NIGHT_DARK3);
    visuals.widgets.noninteractive.fg_stroke = egui::Stroke::new(1.0, TN_NIGHT_FG);

    // Widgets - inactive
    visuals.widgets.inactive.bg_fill = TN_NIGHT_BG_HIGHLIGHT;
    visuals.widgets.inactive.bg_stroke = egui::Stroke::new(1.0, TN_NIGHT_BLUE0);
    visuals.widgets.inactive.fg_stroke = egui::Stroke::new(1.0, TN_NIGHT_FG_DARK);

    // Widgets - hovered
    visuals.widgets.hovered.bg_fill = TN_NIGHT_DARK3;
    visuals.widgets.hovered.bg_stroke = egui::Stroke::new(2.0, TN_NIGHT_CYAN);
    visuals.widgets.hovered.fg_stroke = egui::Stroke::new(1.5, TN_NIGHT_CYAN);

    // Widgets - active
    visuals.widgets.active.bg_fill = TN_NIGHT_BLUE;
    visuals.widgets.active.bg_stroke = egui::Stroke::new(2.0, TN_NIGHT_CYAN);
    visuals.widgets.active.fg_stroke = egui::Stroke::new(1.5, TN_NIGHT_FG);

    // Selection
    visuals.selection.bg_fill = TN_NIGHT_BLUE0;
    visuals.selection.stroke = egui::Stroke::new(1.5, TN_NIGHT_CYAN);

    apply_common_tokyo_night_style(&mut visuals, &mut style, ctx);
}

fn configure_tokyo_night_storm(ctx: &egui::Context) {
    let mut style = (*ctx.style()).clone();
    let mut visuals = egui::Visuals::dark();

    // Backgrounds
    visuals.window_fill = TN_STORM_BG;
    visuals.panel_fill = TN_STORM_BG;
    visuals.extreme_bg_color = TN_STORM_BG_DARK;
    visuals.faint_bg_color = TN_STORM_BG_HIGHLIGHT;

    // Text
    visuals.override_text_color = Some(TN_STORM_FG);
    visuals.hyperlink_color = TN_STORM_CYAN;

    // Widgets - noninteractive
    visuals.widgets.noninteractive.bg_fill = TN_STORM_BG_HIGHLIGHT;
    visuals.widgets.noninteractive.bg_stroke = egui::Stroke::new(1.0, TN_STORM_DARK3);
    visuals.widgets.noninteractive.fg_stroke = egui::Stroke::new(1.0, TN_STORM_FG);

    // Widgets - inactive
    visuals.widgets.inactive.bg_fill = TN_STORM_BG_HIGHLIGHT;
    visuals.widgets.inactive.bg_stroke = egui::Stroke::new(1.0, TN_STORM_BLUE0);
    visuals.widgets.inactive.fg_stroke = egui::Stroke::new(1.0, TN_STORM_FG_DARK);

    // Widgets - hovered
    visuals.widgets.hovered.bg_fill = TN_STORM_DARK3;
    visuals.widgets.hovered.bg_stroke = egui::Stroke::new(2.0, TN_STORM_CYAN);
    visuals.widgets.hovered.fg_stroke = egui::Stroke::new(1.5, TN_STORM_CYAN);

    // Widgets - active
    visuals.widgets.active.bg_fill = TN_STORM_BLUE;
    visuals.widgets.active.bg_stroke = egui::Stroke::new(2.0, TN_STORM_CYAN);
    visuals.widgets.active.fg_stroke = egui::Stroke::new(1.5, TN_STORM_FG);

    // Selection
    visuals.selection.bg_fill = TN_STORM_BLUE0;
    visuals.selection.stroke = egui::Stroke::new(1.5, TN_STORM_CYAN);

    apply_common_tokyo_night_style(&mut visuals, &mut style, ctx);
}

fn configure_tokyo_night_moon(ctx: &egui::Context) {
    let mut style = (*ctx.style()).clone();
    let mut visuals = egui::Visuals::dark();

    // Backgrounds
    visuals.window_fill = TN_MOON_BG;
    visuals.panel_fill = TN_MOON_BG;
    visuals.extreme_bg_color = TN_MOON_BG_DARK;
    visuals.faint_bg_color = TN_MOON_BG_HIGHLIGHT;

    // Text
    visuals.override_text_color = Some(TN_MOON_FG);
    visuals.hyperlink_color = TN_MOON_CYAN;

    // Widgets - noninteractive
    visuals.widgets.noninteractive.bg_fill = TN_MOON_BG_HIGHLIGHT;
    visuals.widgets.noninteractive.bg_stroke = egui::Stroke::new(1.0, TN_MOON_DARK3);
    visuals.widgets.noninteractive.fg_stroke = egui::Stroke::new(1.0, TN_MOON_FG);

    // Widgets - inactive
    visuals.widgets.inactive.bg_fill = TN_MOON_BG_HIGHLIGHT;
    visuals.widgets.inactive.bg_stroke = egui::Stroke::new(1.0, TN_MOON_BLUE0);
    visuals.widgets.inactive.fg_stroke = egui::Stroke::new(1.0, TN_MOON_FG_DARK);

    // Widgets - hovered
    visuals.widgets.hovered.bg_fill = TN_MOON_DARK3;
    visuals.widgets.hovered.bg_stroke = egui::Stroke::new(2.0, TN_MOON_CYAN);
    visuals.widgets.hovered.fg_stroke = egui::Stroke::new(1.5, TN_MOON_CYAN);

    // Widgets - active
    visuals.widgets.active.bg_fill = TN_MOON_BLUE;
    visuals.widgets.active.bg_stroke = egui::Stroke::new(2.0, TN_MOON_CYAN);
    visuals.widgets.active.fg_stroke = egui::Stroke::new(1.5, TN_MOON_FG);

    // Selection
    visuals.selection.bg_fill = TN_MOON_BLUE0;
    visuals.selection.stroke = egui::Stroke::new(1.5, TN_MOON_CYAN);

    apply_common_tokyo_night_style(&mut visuals, &mut style, ctx);
}

fn apply_common_tokyo_night_style(
    visuals: &mut egui::Visuals,
    style: &mut egui::Style,
    ctx: &egui::Context,
) {
    // Shadows for depth
    visuals.popup_shadow = egui::epaint::Shadow {
        extrusion: 12.0,
        color: Color32::from_black_alpha(200),
    };

    visuals.window_shadow = egui::epaint::Shadow {
        extrusion: 16.0,
        color: Color32::from_black_alpha(160),
    };

    // Modern rounded corners
    visuals.window_rounding = egui::Rounding::same(8.0);
    visuals.menu_rounding = egui::Rounding::same(6.0);

    // Resize and interaction
    visuals.resize_corner_size = 12.0;
    visuals.clip_rect_margin = 3.0;

    ctx.set_visuals(visuals.clone());

    // Spacing for modern, airy feel
    style.spacing.item_spacing = egui::vec2(10.0, 8.0);
    style.spacing.button_padding = egui::vec2(16.0, 8.0);
    style.spacing.menu_margin = egui::Margin::same(10.0);
    style.spacing.indent = 24.0;
    style.spacing.window_margin = egui::Margin::same(12.0);

    // Interaction
    style.interaction.resize_grab_radius_side = 6.0;
    style.interaction.resize_grab_radius_corner = 12.0;

    ctx.set_style(style.clone());
}

// ===== STATUS COLOR HELPERS =====

pub fn get_status_color_tokyo_night(
    status: &crate::instance::InstanceStatus,
    variant: TokyoNightVariant,
) -> Color32 {
    use crate::instance::InstanceStatus;
    match variant {
        TokyoNightVariant::Night => match status {
            InstanceStatus::Running => TN_NIGHT_GREEN,
            InstanceStatus::Stopped => TN_NIGHT_DARK3,
            InstanceStatus::Starting | InstanceStatus::Stopping => TN_NIGHT_CYAN,
            InstanceStatus::Error => TN_NIGHT_RED,
            InstanceStatus::Suspended => TN_NIGHT_ORANGE,
        },
        TokyoNightVariant::Storm => match status {
            InstanceStatus::Running => TN_STORM_GREEN,
            InstanceStatus::Stopped => TN_STORM_DARK3,
            InstanceStatus::Starting | InstanceStatus::Stopping => TN_STORM_CYAN,
            InstanceStatus::Error => TN_STORM_RED,
            InstanceStatus::Suspended => TN_STORM_ORANGE,
        },
        TokyoNightVariant::Moon => match status {
            InstanceStatus::Running => TN_MOON_GREEN,
            InstanceStatus::Stopped => TN_MOON_DARK3,
            InstanceStatus::Starting | InstanceStatus::Stopping => TN_MOON_CYAN,
            InstanceStatus::Error => TN_MOON_RED,
            InstanceStatus::Suspended => TN_MOON_ORANGE,
        },
    }
}

// Helper function for status icon (same for all variants)
pub fn get_status_icon(status: &crate::instance::InstanceStatus) -> &'static str {
    use crate::instance::InstanceStatus;
    match status {
        InstanceStatus::Running => "●",   // Filled circle
        InstanceStatus::Stopped => "○",   // Empty circle
        InstanceStatus::Starting => "◐",  // Half circle
        InstanceStatus::Stopping => "◑",  // Half circle
        InstanceStatus::Error => "✕",     // X mark
        InstanceStatus::Suspended => "⏸", // Pause symbol
    }
}

// ===== LEGACY OCEAN THEME (Keep for backwards compatibility) =====

// Deep Dark Material Blue Ocean Theme - Original
pub const BG_MAIN: Color32 = Color32::from_rgb(0, 7, 45);
pub const BG_PANEL: Color32 = Color32::from_rgb(10, 27, 61);
pub const BG_SECONDARY: Color32 = Color32::from_rgb(26, 47, 82);
pub const BG_ELEVATED: Color32 = Color32::from_rgb(36, 55, 95);
pub const BG_HOVER: Color32 = Color32::from_rgb(26, 67, 191);
pub const BG_CONSOLE: Color32 = Color32::from_rgb(0, 5, 16);

pub const TEXT_PRIMARY: Color32 = Color32::from_rgb(137, 207, 240);
pub const TEXT_SECONDARY: Color32 = Color32::from_rgb(48, 213, 200);
pub const TEXT_ACCENT: Color32 = Color32::from_rgb(26, 67, 191);
pub const TEXT_BRIGHT: Color32 = Color32::from_rgb(48, 213, 200);

pub const STATUS_RUNNING: Color32 = Color32::from_rgb(80, 250, 123);
pub const STATUS_STOPPED: Color32 = Color32::from_rgb(255, 85, 85);
pub const STATUS_WARNING: Color32 = Color32::from_rgb(241, 250, 140);
pub const STATUS_SUSPENDED: Color32 = Color32::from_rgb(139, 233, 253);
pub const STATUS_UNKNOWN: Color32 = Color32::from_rgb(98, 114, 164);

pub const ACTION_PRIMARY: Color32 = Color32::from_rgb(48, 213, 200);
pub const ACTION_PRIMARY_HOVER: Color32 = Color32::from_rgb(26, 67, 191);
pub const ACTION_SECONDARY: Color32 = Color32::from_rgb(26, 47, 82);
pub const ACTION_DANGER: Color32 = Color32::from_rgb(255, 85, 85);
pub const ACTION_SUCCESS: Color32 = Color32::from_rgb(80, 250, 123);

pub const BORDER_DEFAULT: Color32 = Color32::from_rgb(36, 55, 95);
pub const BORDER_FOCUS: Color32 = Color32::from_rgb(48, 213, 200);
pub const DIVIDER: Color32 = Color32::from_rgb(26, 47, 82);

pub const SELECTION_BG: Color32 = Color32::from_rgb(26, 67, 191);
pub const SELECTION_HOVER: Color32 = Color32::from_rgb(10, 27, 61);

pub const GRAPH_CPU: Color32 = Color32::from_rgb(48, 213, 200);
pub const GRAPH_MEMORY: Color32 = Color32::from_rgb(137, 207, 240);
pub const GRAPH_DISK: Color32 = Color32::from_rgb(26, 67, 191);
pub const GRAPH_NETWORK: Color32 = Color32::from_rgb(80, 250, 123);

pub fn configure_ocean_theme(ctx: &egui::Context) {
    let mut style = (*ctx.style()).clone();
    let mut visuals = egui::Visuals::dark();

    visuals.window_fill = BG_MAIN;
    visuals.panel_fill = BG_PANEL;
    visuals.extreme_bg_color = BG_CONSOLE;
    visuals.faint_bg_color = BG_SECONDARY;

    visuals.override_text_color = Some(TEXT_PRIMARY);
    visuals.hyperlink_color = ACTION_PRIMARY;

    visuals.widgets.noninteractive.bg_fill = BG_SECONDARY;
    visuals.widgets.noninteractive.bg_stroke = egui::Stroke::new(1.0, BORDER_DEFAULT);
    visuals.widgets.noninteractive.fg_stroke = egui::Stroke::new(1.0, TEXT_PRIMARY);

    visuals.widgets.inactive.bg_fill = BG_ELEVATED;
    visuals.widgets.inactive.bg_stroke = egui::Stroke::new(1.0, BORDER_DEFAULT);
    visuals.widgets.inactive.fg_stroke = egui::Stroke::new(1.0, TEXT_SECONDARY);

    visuals.widgets.hovered.bg_fill = BG_HOVER;
    visuals.widgets.hovered.bg_stroke = egui::Stroke::new(1.5, ACTION_PRIMARY);
    visuals.widgets.hovered.fg_stroke = egui::Stroke::new(1.0, TEXT_BRIGHT);

    visuals.widgets.active.bg_fill = SELECTION_BG;
    visuals.widgets.active.bg_stroke = egui::Stroke::new(2.0, BORDER_FOCUS);
    visuals.widgets.active.fg_stroke = egui::Stroke::new(1.0, TEXT_BRIGHT);

    visuals.selection.bg_fill = SELECTION_BG;
    visuals.selection.stroke = egui::Stroke::new(1.0, ACTION_PRIMARY);

    visuals.popup_shadow = egui::epaint::Shadow {
        extrusion: 8.0,
        color: Color32::from_black_alpha(180),
    };

    visuals.window_shadow = egui::epaint::Shadow {
        extrusion: 12.0,
        color: Color32::from_black_alpha(140),
    };

    visuals.resize_corner_size = 12.0;
    visuals.clip_rect_margin = 3.0;

    ctx.set_visuals(visuals);

    style.spacing.item_spacing = egui::vec2(8.0, 8.0);
    style.spacing.button_padding = egui::vec2(12.0, 8.0);
    style.spacing.menu_margin = egui::Margin::same(8.0);
    style.spacing.indent = 20.0;

    style.interaction.resize_grab_radius_side = 5.0;
    style.interaction.resize_grab_radius_corner = 10.0;

    ctx.set_style(style);
}

pub fn get_status_color(status: &crate::instance::InstanceStatus) -> Color32 {
    use crate::instance::InstanceStatus;
    match status {
        InstanceStatus::Running => STATUS_RUNNING,
        InstanceStatus::Stopped => STATUS_STOPPED,
        InstanceStatus::Starting | InstanceStatus::Stopping => STATUS_WARNING,
        InstanceStatus::Error => STATUS_STOPPED,
        InstanceStatus::Suspended => STATUS_SUSPENDED,
    }
}
